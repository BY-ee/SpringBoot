<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Home</title>

    <link rel="stylesheet" th:href="@{/css/styles-v1.css}" href="../../static/css/styles-v1.css">

    <script type="text/javascript">
        function showLogInAlert(message) {
            if (message) {
                alert(message);
            }
        }
    </script>

    <script>
        function confirmLogOutPost() {
            let confirmFlag = confirm("로그아웃하시겠습니까?");
            if(confirmFlag) {
                alert("성공적으로 로그아웃되었습니다.")
                return true;
            } else {
                return false;
            }
        }
    </script>
</head>
<body class="bg-image-milkyway">
    <div class="flex-end gap-20 mr-20">
        <form th:action="@{/my-page}" method="get">
            <button class="btn btn-primary" type="submit">내정보</button>
        </form>

        <form th:action="@{/logout}" method="get" onsubmit="return confirmLogOutPost()">
            <button class="btn btn-secondary" type="submit">로그아웃</button>
        </form>
    </div>


    <div th:if="${logInMessage != null}">
        <script>
            showLogInAlert("[[${logInMessage}]]");
        </script>
    </div>

    <div class="flex-space-around">
        <div class="flex-col" style="align-items: start;">
            <div class="box-left">
                <p class="box-title">Q&A</p>
            </div>

            <div th:each="post : ${postPage.content}" style="width: 400px; margin: 0 20px 0 200px;">
                <form th:action="@{/post/detail/{id}(id=${post.id})}" method="get">
                    <input type="hidden" th:value="${postPage.number + 1}" name="page" />
                    <div class="post-preview" onclick="this.closest('form').submit();">
                        <div class="pointer ml-10">
                            <div class="flex mb-5" style="gap: 50px;">
                                <p th:text="${post.nickname}"></p>
                            </div>
                            <p th:text="${post.title}"></p>
                        </div>
                    </div>
                    <hr class="my-15">
                </form>
            </div>

            <form th:action="@{/post/articles}" method="get">
                <input type="hidden" th:value="${postPage.number + 1}" name="page" />
                <p onclick="this.closest('form').submit()" style="margin-left: 210px; color: #FFF; cursor: pointer;">전체 글 보기</p>
            </form>
        </div>

        <div class="flex-col" style="align-items: end;">
            <div class="box-right">
                <p class="box-title">커뮤니티</p>
            </div>

            <div th:each="post : ${postPage.content}" style="width: 400px; margin: 0 200px 0 20px;">
                <form th:action="@{/post/detail/{id}(id=${post.id})}" method="get">
                    <input type="hidden" th:value="${postPage.number + 1}" name="page" />
                    <div class="post-preview" onclick="this.closest('form').submit();">
                        <div class="pointer ml-10">
                            <div class="flex mb-5" style="gap: 50px;">
                                <p th:text="${post.nickname}"></p>
                            </div>
                            <p th:text="${post.title}"></p>
                        </div>
                    </div>
                    <hr class="my-15">
                </form>
            </div>

            <form th:action="@{/post/articles}" method="get">
                <p onclick="this.closest('form').submit()" style="margin-right: 500px; color: #FFF; cursor: pointer;">전체 글 보기</p>
            </form>
        </div>
    </div>
</body>
</html>